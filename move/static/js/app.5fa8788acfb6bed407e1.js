webpackJsonp([1],{NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},n=s("VU/8")({name:"App"},i,!1,null,null,null).exports,r=s("/ocq"),o={mounted:function(){var t=this;setTimeout(function(){t.$router.push("home")},2e3)}},c={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("main",[e("div",{staticClass:"logo"},[e("img",{attrs:{src:"static/img/LOGO_text.png"}})])])}]},l=s("VU/8")(o,c,!1,null,null,null).exports,u=s("Au9i"),d=s.n(u),v={methods:{isTokenID:function(){localStorage.tokenID||(Object(u.Toast)({message:"尚未登录",position:"middle",duration:2e3}),this.$router.push("Home"))}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav-bar"},[s("ul",[s("li",[s("router-link",{attrs:{to:{path:"/home/main"},"active-class":"active01"}},[s("span",[t._v("电影")])])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:{path:"/home/order"},"active-class":"active02"},nativeOn:{click:function(e){t.isTokenID(e)}}},[s("span",[t._v("订单")])])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:{path:"/home/user"},"active-class":"active03"},nativeOn:{click:function(e){t.isTokenID(e)}}},[s("span",[t._v("我的")])])],1)])])},staticRenderFns:[]},h={components:{Footer:s("VU/8")(v,m,!1,null,null,null).exports}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("keep-alive",[e("router-view")],1),this._v(" "),e("Footer")],1)},staticRenderFns:[]},_=s("VU/8")(h,p,!1,null,null,null).exports,f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("em",[this._t("default")],2)])},staticRenderFns:[]},g=s("VU/8")(null,f,!1,null,null,null).exports,C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"m-title"},[e("h3",[this._t("default")],2)])},staticRenderFns:[]},k=s("VU/8")(null,C,!1,null,null,null).exports,y={components:{HeaderTop:g,HeaderTitle:k},data:function(){return{movieList:[],isShow:!1}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.$http.get("/Movie/New").then(function(e){t.movieList=e.data}).catch(function(t){console.log(t)})}}},T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("HeaderTop",[t._v("小莱电影")]),t._v(" "),s("HeaderTitle",[t._v("影片")]),t._v(" "),s("div",{staticClass:"container"},t._l(t.movieList,function(e){return s("div",{staticClass:"movie-list"},[s("router-link",{attrs:{to:{path:"/detail",query:{id:e.MovieID,name:e.Name,img:e.ImgUrl,rate:e.Rate,actors:e.Actors,type:e.Type,releaseTime:e.ReleaseTime,intro:e.Intro}}}},[s("div",{staticClass:"movie-img"},[s("img",{attrs:{src:t.imgUrl+e.ImgUrl}})]),t._v(" "),s("div",{staticClass:"movie-info"},[s("div",{staticClass:"hd"},[s("h2",[t._v(t._s(e.Name))]),t._v(" "),s("div",{staticClass:"movie-type"},[s("span",[t._v("2D")]),s("span",[t._v("IMAX")])])]),t._v(" "),s("p",[t._v(t._s(e.Actors))]),t._v(" "),s("p",[t._v(t._s(e.Type))])]),t._v(" "),s("div",{staticClass:"grade"},[t._v("\n\t\t\t\t\t"+t._s(e.Rate)+"分\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"buy"},[s("router-link",{attrs:{to:{path:"/cinema",query:{id:e.MovieID,name:e.Name,rate:e.Rate}}}},[t._v("\n\t\t\t\t\t购票")])],1)])],1)}))],1)},staticRenderFns:[]},$=s("VU/8")(y,T,!1,null,null,null).exports,w={components:{HeaderTop:g},data:function(){return{ordersList:[]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.$http.get("/Orders",{headers:{authorization:"basic "+localStorage.tokenID}}).then(function(e){t.ordersList=e.data}).catch(function(t){console.log(t)})}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("HeaderTop",[t._v("我的订单")]),t._v(" "),s("div",{staticClass:"container"},t._l(t.ordersList,function(e){return s("div",{staticClass:"order-item"},[s("dl",[s("dt",[s("img",{attrs:{src:t.imgUrl+e.ImgUrl}})]),t._v(" "),s("dd",[s("em",[t._v(t._s(e.MovieName)+" "+t._s(e.Total)+"张")])]),t._v(" "),s("dd",[t._v(t._s(e.ReserveTime))]),t._v(" "),s("dd",[t._v(t._s(e.Room)+" "+t._s(e.Seat))])]),t._v(" "),s("div",{staticClass:"status"},[s("em",[t._v("总价："+t._s(e.Price)+"元")]),s("span",[t._v("已完成")])])])}))],1)},staticRenderFns:[]},D=s("VU/8")(w,b,!1,null,null,null).exports,I={components:{HeaderTop:g},methods:{exit:function(){localStorage.removeItem("tokenID"),Object(u.Toast)({message:"退出成功！",position:"top",duration:3e3}),this.$router.push("Home")}}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("HeaderTop",[t._v("我的")]),t._v(" "),s("div",{staticClass:"user-main"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),s("div",{staticClass:"login-btn user-btn"},[s("a",{attrs:{href:"#"},on:{click:t.exit}},[t._v("点击退出")])]),t._v(" "),t._m(5)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"user-item"},[e("a",{attrs:{href:"#"}},[e("em",[this._v("我的订单")]),e("span",{staticClass:"left_gray"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"user-item"},[e("a",{attrs:{href:"#"}},[e("em",[this._v("优惠卷")]),e("span",{staticClass:"left_gray"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"user-item"},[e("a",{attrs:{href:"#"}},[e("em",[this._v("影院会员卡")]),e("span",{staticClass:"left_gray"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"user-item"},[e("a",{attrs:{href:"#"}},[e("em",[this._v("想看的电影")]),e("span",{staticClass:"left_gray"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"user-item"},[e("a",{attrs:{href:"#"}},[e("em",[this._v("看过的电影")]),e("span",{staticClass:"left_gray"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"user-footer"},[e("div",{staticClass:"user-logo"},[e("img",{attrs:{src:"static/img/LOGO_gray.png"}})]),this._v(" "),e("p",[this._v("客服电话：027-87229009")])])}]},O=s("VU/8")(I,x,!1,null,null,null).exports,R={components:{HeaderTop:g},data:function(){return{MovieId:this.$route.query.id,MovieName:this.$route.query.name,MovieRate:this.$route.query.rate}},mounted:function(){this.showStar(this.$route.query.rate)},methods:{showStar:function(t){var e=document.getElementById("star_con").offsetWidth,s=document.getElementById("del_star"),a=t*e/10;s.style.backgroundPosition=-a+"px 0px",s.style.left=a+"px"}}},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("HeaderTop",[s("span",{staticClass:"go-back"},[s("router-link",{attrs:{to:"home"}})],1),t._v("\n        "+t._s(t.$route.query.name)+"\n    ")]),t._v(" "),s("div",{staticClass:"container detail-container"},[s("div",{staticClass:"banner"},[s("div",{staticClass:"filter-box"}),t._v(" "),s("div",{staticClass:"thumbnail"},[s("img",{attrs:{src:t.imgUrl+t.$route.query.img}})]),t._v(" "),s("div",{staticClass:"movie-intr"},[s("h1",[t._v(t._s(t.$route.query.name))]),t._v(" "),s("div",{staticClass:"star-level"},[t._m(0),t._v(" "),s("div",{staticClass:"point"},[t._v("\n    \t\t\t\t\t"+t._s(t.$route.query.rate)+"\n    \t\t\t\t")])]),t._v(" "),s("p",[t._v(t._s(t.$route.query.type))]),t._v(" "),s("p",[t._v(t._s(t.$route.query.actors))]),t._v(" "),s("p",[t._v("上映时间："+t._s(t.$route.query.releaseTime))])])]),t._v(" "),s("div",{staticClass:"movie-recommend"},[s("p",[t._v(t._s(t.$route.query.intro))])])]),t._v(" "),s("div",{staticClass:"order-bar"},[s("router-link",{attrs:{to:{path:"/cinema",query:{id:this.MovieId,name:this.MovieName,rate:this.MovieRate}}}},[t._v("\n\t\t\t立即购票")])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"star-vote",attrs:{id:"star_con"}},[e("span",{staticClass:"add-star",attrs:{id:"add_star"}}),this._v(" "),e("span",{staticClass:"del-star",attrs:{id:"del_star"}})])}]},q=s("VU/8")(R,S,!1,null,null,null).exports,E={components:{HeaderTop:g,HeaderTitle:k},data:function(){return{movieName:this.$route.query.name,movieShow:[]}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;if(!localStorage.tokenID)return Object(u.Toast)({message:"尚未登录",position:"middle",duration:2e3}),void this.$router.push("login");this.$http.get("Movie/Shows?MovieID="+this.$route.query.id).then(function(e){t.movieShow=e.data}).catch(function(t){console.log(t.response.status)})},selectTick:function(t){this.$router.push({path:"/seat",query:{TimeID:t,movieName:this.movieName}})}}},j={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("HeaderTop",[s("span",{staticClass:"go-back"},[s("router-link",{attrs:{to:"home"}})],1),t._v("\n        影院\n        ")]),t._v(" "),s("HeaderTitle",[t._v(t._s(t.$route.query.name)),s("em",[t._v(t._s(t.$route.query.rate)+"分")])]),t._v(" "),s("div",{staticClass:"container"},t._l(t.movieShow,function(e){return s("div",{staticClass:"scene-item"},[s("span",{staticClass:"c-time"},[t._v(t._s(e.Time.substring(0,5)))]),t._v(" "),s("span",{staticClass:"c-type"},[t._v("国语3D"),s("em",[t._v(t._s(e.Room))])]),t._v(" "),s("span",{staticClass:"c-price"},[t._v("￥"+t._s(e.Price))]),t._v(" "),s("span",{staticClass:"c-btn"},[s("button",{on:{click:function(s){t.selectTick(e.TimeID)}}},[t._v("选择购票")])])])}))],1)},staticRenderFns:[]},U=s("VU/8")(E,j,!1,null,null,null).exports,A={components:{HeaderTop:g},data:function(){return{seatlist:[],ShowsDetail:[],TimeID:this.$route.query.TimeID,ticketArray:[]}},created:function(){for(var t=0;t<100;t++){var e={id:t,status:""};this.seatlist[t]=e}this.fetchData()},methods:{fetchData:function(){var t=this;this.$http.get("Movie/ShowsDetail?TimeID="+this.TimeID).then(function(e){t.ShowsDetail=e.data}).catch(function(t){console.log(t),Object(u.Toast)({message:"网络错误，不能访问",position:"top",duration:3e3})}),this.$http.get("/Movie/Seat?TimeID="+this.TimeID,{headers:{authorization:"basic "+localStorage.tokenID}}).then(function(e){for(var s=0;s<e.data.length;s++){var a=10*(e.data[s].Row-1)+e.data[s].Col-1;t.seatlist.push(a),t.seatlist[a].status="active-selled"}}).catch(function(t){console.log(t)})},setSeat:function(t){if(this.ticketArray.length>=4)Object(u.Toast)({message:"最多购买4张",position:"middle",duration:3e3});else if(""==this.seatlist[t].status){this.seatlist[t].status="active";var e=Math.floor(t/10)+1,s=t%10+1;this.ticketArray.push({Row:e,Col:s})}},delTick:function(t){var e=this.ticketArray[t].Row,s=this.ticketArray[t].Col;this.ticketArray.splice(t,1);var a=10*(e-1)+s-1;this.seatlist[a].status=""},buy:function(){var t=this;this.ticketArray.length>0?this.$http.post("/Orders",this.qs.stringify({TimeID:this.TimeID,SeatList:this.ticketArray}),{headers:{authorization:"basic "+localStorage.tokenID}}).then(function(e){Object(u.Toast)({message:"下单成功",position:"middle",duration:3e3}),t.$router.push({path:"/order"})}).catch(function(t){console.log(t)}):Object(u.Toast)({message:"你还没有选择座位",position:"middle",duration:3e3})}},computed:{totalPrice:function(){var t=this.ticketArray.length*this.ShowsDetail.Price;if(t)return"￥"+t}}},H={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("HeaderTop",[s("span",{staticClass:"go-back"},[s("router-link",{attrs:{to:"home"}})],1),t._v("\n    影院\n    ")]),t._v(" "),s("div",{staticClass:"seat-title"},[s("h2",[t._v(t._s(t.$route.query.movieName))]),t._v(" "),s("h4",[t._v("\n            今天"+t._s((new Date).getMonth()+1+"月"+(new Date).getDate()+"日 ")+" \n            "+t._s(t.ShowsDetail.Time)+" 国语2D\n        ")]),t._v(" "),s("div",{staticClass:"lobby"},[s("span",[t._v(t._s(t.ShowsDetail.Room)+"银幕")])])]),t._v(" "),s("div",{staticClass:"container seat"},[s("div",{staticClass:"seating"},[s("ul",t._l(t.seatlist,function(e){return s("li",{class:e.status,on:{click:function(s){t.setSeat(e.id)}}})}))]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"ticket"},[s("h5",[t._v("已选座位")]),t._v(" "),t._l(t.ticketArray,function(e,a){return s("div",{staticClass:"ticket-item"},[s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.delTick(a)}}},[t._v("\n\t\t\t\t\t"+t._s(t.ticketArray[a].Row)+"排"+t._s(t.ticketArray[a].Col)+"座"),s("em",[t._v("￥"+t._s(t.ShowsDetail.Price))])])])})],2)]),t._v(" "),s("div",{staticClass:"seat-bar",on:{click:t.buy}},[s("a",{attrs:{href:"#"}},[t._v(t._s(t.totalPrice)+"确认选座")])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tips-seat"},[e("span",{staticClass:"selecting"},[this._v("可选")]),e("span",{staticClass:"selected"},[this._v("已选")]),e("span",{staticClass:"selled"},[this._v("已售")])])}]},N=s("VU/8")(A,H,!1,null,null,null).exports,M={data:function(){return{username:"",password:""}},methods:{loginPost:function(){var t=this;""!=this.username?""!=this.password?this.$http.post("/Login",this.qs.stringify({UserName:this.username,Password:this.password})).then(function(e){localStorage.setItem("tokenID",e.data),Object(u.Toast)({message:"登录成功",position:"top",duration:3e3}),t.$router.push("Home")}).catch(function(t){401!=t.response.status?404!=t.response.status?console.log(t.response.status):Object(u.Toast)({message:"网路请求失败，请稍候再试",position:"top",duration:3e3}):Object(u.Toast)({message:"无法访问",position:"top",duration:3e3})}):Object(u.Toast)({message:"密码不能为空",position:"top",duration:3e3}):Object(u.Toast)({message:"用户名不能为空",position:"top",duration:3e3})}}},P={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",{staticClass:"login-main"},[t._m(0),t._v(" "),s("div",{staticClass:"login-from"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"login-btn"},[s("a",{attrs:{href:"#"},on:{click:t.loginPost}},[t._v("登录")])]),t._v(" "),s("div",{staticClass:"link-reg"},[s("router-link",{attrs:{to:"register"}},[t._v("还没账号？")])],1),t._v(" "),s("div",{staticClass:"link-home"},[s("router-link",{attrs:{to:"home"}},[t._v("暂不登录")])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login-logo"},[e("img",{attrs:{src:"static/img/LOGO.png"}})])}]},F=s("VU/8")(M,P,!1,null,null,null).exports,V={components:{HeaderTop:g},data:function(){return{username:"",password:"",password2:"",checked:!0}},methods:{register:function(){var t=this;""!=this.username?""!=this.password?this.password==this.password2?this.checked?this.$http.post("/Register",this.qs.stringify({UserName:this.username,Password:this.password})).then(function(e){console.log(e),Object(u.Toast)({message:"注册成功！",position:"top",duration:3e3}),t.$router.push("login")}).catch(function(t){409!=t.response.status?404!=t.response.status?console.log(t.response.status):Object(u.Toast)({message:"网路请求失败，请稍候再试",position:"top",duration:3e3}):Object(u.Toast)({message:"该用户已经注册",position:"top",duration:3e3})}):Object(u.Toast)({message:"请同意协议",position:"top",duration:3e3}):Object(u.Toast)({message:"两次密码不一致",position:"top",duration:3e3}):Object(u.Toast)({message:"密码不能为空",position:"top",duration:3e3}):Object(u.Toast)({message:"用户名不能为空",position:"top",duration:3e3})}}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("HeaderTop",[s("span",{staticClass:"go-back"},[s("router-link",{attrs:{to:"home"}})],1),t._v(" "),s("span",{staticClass:"go-next"},[s("router-link",{attrs:{to:"login"}},[t._v("登录")])],1),t._v("\n        用户注册\n    ")]),t._v(" "),s("div",{staticClass:"reg-main"},[s("div",{staticClass:"reg-from"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password2,expression:"password2"}],attrs:{type:"password",placeholder:"请确认密码"},domProps:{value:t.password2},on:{input:function(e){e.target.composing||(t.password2=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"treaty"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],attrs:{type:"checkbox",id:"treaty"},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{change:function(e){var s=t.checked,a=e.target,i=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&(t.checked=s.concat([null])):n>-1&&(t.checked=s.slice(0,n).concat(s.slice(n+1)))}else t.checked=i}}}),t._v(" "),s("label",{attrs:{for:"treaty"}},[t._v("我已阅读并同意《格莱科技用户协议》")])]),t._v(" "),s("div",{staticClass:"login-btn reg-btn"},[s("a",{attrs:{href:"#"},on:{click:t.register}},[t._v("立即注册")])]),t._v(" "),t._m(0)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"contact"},[e("span",[this._v("© 格莱科技 027-87229009")])])}]},z=s("VU/8")(V,L,!1,null,null,null).exports;a.default.use(r.a);var G=new r.a({routes:[{path:"/",component:l},{path:"/home",component:_,redirect:"/home/main",children:[{path:"main",component:$},{path:"order",component:D},{path:"user",component:O}]},{path:"/detail",component:q},{path:"/cinema",component:U},{path:"/seat",component:N},{path:"/login",component:F},{path:"/register",component:z},{path:"*",redirect:"home"}]}),W=s("mtWM"),B=s.n(W),J=s("mw3O"),X=s.n(J);s("d8/S");a.default.use(d.a),a.default.prototype.$http=B.a,a.default.prototype.qs=X.a,a.default.prototype.imgUrl="http://film.glkjjt.com/",B.a.defaults.baseURL="http://film.glkjjt.com/api",a.default.config.productionTip=!1,new a.default({el:"#app",router:G,components:{App:n},template:"<App/>"})},"d8/S":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.5fa8788acfb6bed407e1.js.map